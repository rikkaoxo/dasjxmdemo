import{u as q,r as f,w as N,a as $,o as g,c as v,b as a,d as e,e as d,f as t,g as x,h as z,E as b,i as F,j as S,l as w,p as M,k as P}from"./index-COjUZeQ6.js";import{E as j,a as T}from"./el-col-9XAX86jF.js";import{E as A}from"./el-checkbox-CJktFstf.js";import{E as D,a as G}from"./el-form-item-Fwc72fMp.js";import{E as H}from"./el-link-DrZKHcHK.js";import{_ as J,E as K}from"./_plugin-vue_export-helper-CMIzlf7v.js";import{E as O}from"./el-input-_OoFJxtZ.js";/* empty css                   */import"./isEqual-DI-HxMro.js";import"./_baseClone-CfvxtYSq.js";const C=i=>(M("data-v-6aef1cf9"),i=i(),P(),i),Q=C(()=>x("h1",null,"注册",-1)),W=C(()=>x("h1",null,"登录",-1)),X={class:"flex"},Y={__name:"LoginPage",setup(i){const I=q(),V=f(!0),u=f(!1),o=f({username:"",password:"",repassword:""}),k={username:[{required:!0,message:"输入的名字不能为空",trigger:"blur"},{min:5,max:10,message:"用户名程度为5-10位字符",trigger:"blur"}],password:[{required:!0,message:"输入的密码不能为空",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码必须是6-15位的非空字符",trigger:"blur"}],repassword:[{required:!0,message:"输入的密码不能为空",trigger:"blur"},{validator:(c,l,n)=>{l!==o.value.password?n(new Error("两次输入的密码不一致")):n()},trigger:"blur"}]},m=f(null),U=async()=>{await m.value.validate(),await z(o.value),b.success("注册成功"),u.value=!1};N(u,()=>{o.value={username:"",password:"",repassword:""}});const h=$(),B=async()=>{await m.value.validate();const c=await F(o.value);I.settoken(c.data.token),b.success("登录成功"),h.push("/")};return(c,l)=>{const n=T,r=D,p=O,y=K,_=H,E=G,L=A,R=j;return g(),v(R,{class:"login-page"},{default:a(()=>[e(n,{span:12,class:"bg"}),e(n,{span:6,offset:3,class:"form"},{default:a(()=>[u.value?(g(),v(E,{key:0,ref_key:"form",ref:m,size:"large",autocomplete:"off",model:o.value,rules:k},{default:a(()=>[e(r,null,{default:a(()=>[Q]),_:1}),e(r,{prop:"username"},{default:a(()=>[e(p,{"prefix-icon":d(S),placeholder:"请输入用户名",modelValue:o.value.username,"onUpdate:modelValue":l[0]||(l[0]=s=>o.value.username=s)},null,8,["prefix-icon","modelValue"])]),_:1}),e(r,{prop:"password"},{default:a(()=>[e(p,{"prefix-icon":d(w),type:"password",placeholder:"请输入密码",modelValue:o.value.password,"onUpdate:modelValue":l[1]||(l[1]=s=>o.value.password=s)},null,8,["prefix-icon","modelValue"])]),_:1}),e(r,{prop:"repassword"},{default:a(()=>[e(p,{"prefix-icon":d(w),type:"password",placeholder:"请输入再次密码",modelValue:o.value.repassword,"onUpdate:modelValue":l[2]||(l[2]=s=>o.value.repassword=s)},null,8,["prefix-icon","modelValue"])]),_:1}),e(r,null,{default:a(()=>[e(y,{class:"button",type:"primary","auto-insert-space":"",onClick:U},{default:a(()=>[t(" 注册 ")]),_:1})]),_:1}),e(r,{class:"flex"},{default:a(()=>[e(_,{type:"info",underline:!1,onClick:l[3]||(l[3]=s=>u.value=!1)},{default:a(()=>[t(" ← 返回 ")]),_:1})]),_:1})]),_:1},8,["model"])):(g(),v(E,{key:1,ref_key:"form",ref:m,size:"large",autocomplete:"off",model:o.value,rules:k},{default:a(()=>[e(r,null,{default:a(()=>[W]),_:1}),e(r,{prop:"username"},{default:a(()=>[e(p,{"prefix-icon":d(S),placeholder:"请输入用户名",modelValue:o.value.username,"onUpdate:modelValue":l[4]||(l[4]=s=>o.value.username=s)},null,8,["prefix-icon","modelValue"])]),_:1}),e(r,{prop:"password"},{default:a(()=>[e(p,{name:"password","prefix-icon":d(w),type:"password",placeholder:"请输入密码",modelValue:o.value.password,"onUpdate:modelValue":l[5]||(l[5]=s=>o.value.password=s)},null,8,["prefix-icon","modelValue"])]),_:1}),e(r,{class:"flex"},{default:a(()=>[x("div",X,[e(L,{modelValue:V.value,"onUpdate:modelValue":l[6]||(l[6]=s=>V.value=s)},{default:a(()=>[t("记住我")]),_:1},8,["modelValue"]),e(_,{type:"primary",underline:!1},{default:a(()=>[t("忘记密码？")]),_:1})])]),_:1}),e(r,null,{default:a(()=>[e(y,{class:"button",type:"primary","auto-insert-space":"",onClick:B},{default:a(()=>[t("登录")]),_:1})]),_:1}),e(r,{class:"flex"},{default:a(()=>[e(_,{type:"info",underline:!1,onClick:l[7]||(l[7]=s=>u.value=!0)},{default:a(()=>[t(" 注册 → ")]),_:1})]),_:1})]),_:1},8,["model"]))]),_:1})]),_:1})}}},pe=J(Y,[["__scopeId","data-v-6aef1cf9"]]);export{pe as default};
